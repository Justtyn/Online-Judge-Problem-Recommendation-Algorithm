<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ACM NOIP 信息学竞赛 测试数据 下载 大全">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>TK题库</title>  
    
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/bootstrap.min.css">

<!-- 可选的Bootstrap主题文件（一般不用引入） -->
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/bootstrap-theme.min.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/white.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/katex.min.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/mathjax.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/semantic.min.css">
	    


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">
          <!-- Static navbar -->
      <nav class="navbar navbar-default" role="navigation" >
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="./">TK题库</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
	      <!--              <li ><a href="bbs.php">Web Board</a></li>-->
              <li ><a href="faqs.php"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> F.A.Qs</a></li>
              <li class='btn-primary' ><a style='color:white' href="problemset.php"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> ProblemSet</a></li>
              <li class='btn-success'><a  style='color:white'  href="problemset.php?search=free"><span class="glyphicon glyphicon-gift" aria-hidden="true"></span> 免费专区</a></li>
              <li class='btn-danger'><a  style='color:white' href="problemset.php?hot"><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> 热门下载</a></li>
              <li class='btn-warning'><a  style='color:white' href="category.php"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Source/Category</a></li>
              <li class='btn-info'><a  style='color:white' href="status.php"><span class="glyphicon glyphicon-play-circle" aria-hidden="true"></span> Status</a></li>
 <!--             <li ><a href="ranklist.php">Ranklist</a></li>
              <li ><a href="recent-contest.php">Recent</a></li>
              <li ><a href="contest.php">Contest</a></li>
	-->
		<li><a > 题目数据全能下，右上角注册充值，支持微信! </a></li>
            </ul>
	    <ul class="nav navbar-nav navbar-right">
	    <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="profile">Login</span><span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
<script src="template/tk/profile.php?1535445895" ></script>
              <!--<li><a href="../navbar-fixed-top/">Fixed top</a></li>-->
	    </ul>
	    </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>


	    
      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
	
<title>Problem 24776 --【USACO2014OPEN】里程表{silver题3}</title><center><h2>24776: 【USACO2014OPEN】里程表{silver题3}</h2><span class=green>Time Limit: </span>5 Sec&nbsp;&nbsp;<span class=green>Memory Limit: </span>256 MB<br><span class=green>Submit: </span>0&nbsp;&nbsp;<span class=green>Solved: </span>0<br>[<a href='submitpage.php?id=24776'>Submit</a>][<a href='problemstatus.php?id=24776'>Status</a>][<a href='bbs.php?pid=24776'>Web Board</a>][Creator:<span id='creator'></span>][<a href='pay.php?pid=24776'>下载FPS1元</a>][<a onclick='$(this).load("cart.php?add=24776");'>添加到购物车</a>][<a href='pay.php?fmt=zipdata&pid=24776'>下载测试数据1元</a>][84kb]</center><!--StartMarkForVirtualJudge--><h2>Description</h2><div class=content><p class="MsoNormal" align="center" style="text-align:center;">
	<b><span style="font-size:16px;">2. </span></b><b><span style="font-size:16px;">里程表</span></b><b><span style="font-size:16px;">{silver</span></b><b><span style="font-size:16px;">题</span></b><b><span style="font-size:16px;">3}</span></b> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">【问题描述】</span> 
</p>
<p class="MsoNormal" style="text-indent:21.0pt;">
	<span style="font-size:16px;">农民约翰的牛正开始一个美妙的旅程。牛车的里程表上显示一个整数表示里程，旅程开始时里程数为X(100 &lt;= X &lt;= 10^18)，结束时里程数为Y(X &lt;= Y &lt;= 10^18)。每当里程表显示一个有趣的数时（包括起点和终点数），牛们会发出愉快的叫声。</span> 
</p>
<p class="MsoNormal" style="text-indent:21.0pt;">
	<span style="font-size:16px;">对于一个里程数的每一位，如果有至少一半的数字时相同的，则这个里程数一个有趣的数。例如：3223和110是有趣的数，而97791 和 123则不是。</span> 
</p>
<p class="MsoNormal" style="text-indent:21.0pt;">
	<span style="font-size:16px;">请计算，整个旅程中，牛们会发出多少吃愉快的叫声。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">【文件输入】 </span><span></span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">&nbsp;&nbsp;&nbsp; 共一行，两个用空格隔开是整数，表示X和Y。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">【文件输出】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">&nbsp;&nbsp;&nbsp; 共一行，一个整数，表示牛叫的次数。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">【输入样例1】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">110 133</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">【输出样例1】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">14</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">【样例1说明】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">这14个有趣的数分别是：</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">110, 111,
112, 113, 114, 115, 116,</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:16px;">117, 118,
119, 121, 122, 131, 133。</span> 
</p></div><h2>Input</h2><div class=content></div><h2>Output</h2><div class=content></div><h2>HINT</h2>
<div class=content><p><p style="font-family:Simsun;font-size:medium;"><br />
	<b>Analysis: Odometer [silver], by Allen Chen</b><br />
</p><br />
<hr /><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	This problem can be easily done by looping from X to Y and counting the number of interesting numbers. As X and Y are huge, this will be too slow. One can speed things up by using dynamic programming.<br />
</p><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	We can try to make all 9 digits, one at a time to occupy at least half of the number. The DP has 4 states, dp[i][und][k][is0] : i is the current position, und is whether you have gone below the actual number, k is a counter to see if you have at least half of the same digit (in my code k starts at 25), and is0 is a boolean if you still have leading zeros. To transition, you loop through 9 digits to add to your current location, let's call it 'nxt', and let's call the digit we want to occupy at least half of the number 'targ'. If nxt is &gt; the digit in the actual number and und = false you skip it since if you haven't gone below the number, you can't add anything greater. Now we compare targ and nxt, if they are the same, we do k-- else k++. Finally we check if we have gone under the number.<br />
</p><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	At the end to total things up, we choose the states that have i = n, is0 = false, and k &lt;= 25 since that means we subtracted more than we added, which means targ occupies at least half of the number.<br />
</p><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	But we also have to consider overcounting. If the number has half of one number and half of another number (ex. 565566), then we need to count those and subtract them off our current amount since we counted these twice. We can simply use the same DP function and instead add two targs and for one of the targs do k++ and the other k--. At the end, we only count the states with k = 25.<br />
</p><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	As the number of digits is small and there are only nine digits, this algorithm is fast enough. My code is as follows:<br />
</p><br />
<pre>#include&lt;iostream&gt;<br />
#include&lt;cstdio&gt;<br />
#include&lt;algorithm&gt;<br />
#include&lt;vector&gt;<br />
#include&lt;set&gt;<br />
#include&lt;utility&gt;<br />
#include&lt;cstring&gt;<br />
#include&lt;stack&gt;<br />
#include&lt;queue&gt;<br />
#include&lt;climits&gt;<br />
using namespace std;<br />
<br />
typedef pair&lt;int, int&gt; pii;<br />
typedef pair&lt;int, pii&gt; edge;<br />
typedef unsigned long long LL;<br />
<br />
const int maxn = 50;<br />
string A, B;<br />
LL dp[maxn][2][maxn][2];<br />
LL getdp(string s, int n, int targ1, int targ2) {<br />
   memset(dp, 0, sizeof(dp));<br />
   dp[0][false][25][true] = 1;<br />
   for (int i = 0; i &lt; n; i++) {<br />
      for (int und = 0; und &lt; 2; und++) {<br />
         for (int k = 0; k &lt; maxn; k++) {<br />
            for (int is0 = 0; is0 &lt; 2; is0++) {<br />
               LL cur = dp[i][und][k][is0];<br />
               for (int nxt = 0; nxt &lt;= 9; nxt++) {<br />
                  if (targ2 != -1 &amp;&amp; (nxt != 0 || is0 == false) &amp;&amp; nxt != targ1 &amp;&amp; nxt != targ2) continue;<br />
                  if (und == 0 &amp;&amp; nxt &gt; s[i] - '0') continue;<br />
                  bool nis0 = is0;<br />
                  nis0 &amp;= !nxt;<br />
                  int nk = k;<br />
                  if (!nis0) {<br />
                     if (targ2 != -1) {<br />
                        if (nxt == targ1) nk--;<br />
                        else if (nxt == targ2) nk++;<br />
                     }<br />
                     if (targ2 == -1) {<br />
                        if (nxt == targ1) nk--;<br />
                        else nk++;<br />
                     }<br />
                  }<br />
                  int nj = und;<br />
                  nj |= (nxt &lt; s[i] - '0');<br />
                  dp[i + 1][nj][nk][nis0] += cur;<br />
               }<br />
            }<br />
         }<br />
      }<br />
   }<br />
   LL ret = 0;<br />
   if (targ2 != -1) {<br />
      for (int i = 0; i &lt; 2; i++) {<br />
         ret += dp[n][i][25][false];<br />
      }<br />
      return ret;<br />
   }<br />
   for (int i = 0; i &lt; 2; i++) {<br />
      for (int k = 0; k &lt;= 25; k++) {<br />
         ret += dp[n][i][k][false];<br />
      }<br />
   }<br />
   return ret;<br />
}<br />
LL f(string s) {<br />
   int n = s.size();<br />
   LL ret = 0;<br />
   LL val;<br />
   for (int targ1 = 0; targ1 &lt;= 9; targ1++) {<br />
      val = getdp(s, n, targ1, -1);<br />
      ret += val;<br />
   }<br />
   for (int targ1 = 0; targ1 &lt;= 9; targ1++) {<br />
      for (int targ2 = targ1 + 1; targ2 &lt;= 9; targ2++) {<br />
         val = getdp(s, n, targ1, targ2);<br />
         ret -= val;<br />
      }<br />
   }<br />
   return ret;<br />
}<br />
int main() {<br />
   freopen("odometer.in","r",stdin);<br />
   freopen("odometer.out","w",stdout);<br />
   cin &gt;&gt; A &gt;&gt; B;<br />
   for (int i = A.size() - 1; i &gt;= 0; i--) {<br />
      int c = A[i] - '0';<br />
      if (c &gt; 0) {<br />
         A[i]--;<br />
         break;<br />
      }<br />
      else A[i] = '9';<br />
   }<br />
   LL ans1 = f(A);<br />
   LL ans2 = f(B);<br />
   printf("%lld\n", ans2 - ans1);<br />
}</pre></p></div><h2>Source</h2><div class=content><p><a href='problemset.php?search=USACO-USACO%E6%9C%88%E8%B5%9B'>USACO-USACO月赛</a>&nbsp;</p></div><center><!--EndMarkForVirtualJudge-->[<a href='submitpage.php?id=24776'>Submit</a>][<a href='problemstatus.php?id=24776'>Status</a>]</center>      </div>

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="http://cdn.hustoj.com/template/bs3/jquery.min.js"></script>

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="http://cdn.hustoj.com/template/bs3/bootstrap.min.js"></script>

<!--<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->
<script>
$(document).ready(function(){
  var msg="<div style='margin-top:10px'  direction='up'   id=broadcast scrollamount=1 scrolldelay=50 onMouseOver='this.stop()'"+
      " onMouseOut='this.start()' class=toprow>"+"<p style=\"text-align:center;\">\r\n\t<span style=\"color:#24292E;font-family:-apple-system&#44; bl<x>inkMacSystemFont&#44; &quot;font-size:16px;background-color:#FFFFFF;\">\u5e86\u795dhustoj\u5728\u9996\u5c4a\u6df1\u5ea6\u8f6f\u4ef6\u5f00\u53d1\u5927\u8d5b\u4e2d\u83b7\u5f97\u4e09\u7b49\u5956\uff0c\u5145\u503c100\u900120\u3002<\/span>\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u672c\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u683c\u5f0f\u6570\u636e\u4e0b\u8f7d\uff0cfps\/xm<x>l\u683c\u5f0f\u542b\u9898\u9762\u56fe\u7247\u6570\u636e\u6807\u7a0b\u652f\u6301hustoj\u7cfb\u7edf\u76f4\u63a5\u5bfc\u5165\uff0czip\u683c\u5f0f\u4ec5\u542b\u6570\u636e\u4e0d\u542b\u9898\u9762\u3002\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u91cd\u590d\u4e0b\u8f7d\u4e0d\u91cd\u590d\u8ba1\u8d39\u3002\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u5982\u9047\u5145\u503c\u4e0d\u80fd\u5230\u8d26&#44;\u8bf7\u8054\u7cfbQQ:10982766\u63d0\u4f9b\u7528\u6237\u540d\u548c\u652f\u4ed8\u5355\u53f7\u8fdb\u884c\u6838\u5bf9\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u7ecf\u8d39\u4e0d\u8db3\u7684\u8001\u5e08\u540c\u5b66\u8bf7\u5148\u770b <br \/>\r\n<span class=\"btn-success\"> <a href=\"problemset.php?search=free\"><span> \u514d\u8d39\u4e13\u533a<\/span><\/a> <\/span>\r\n<br \/>"+"</div>";
  $(".jumbotron").prepend(msg);
  $("form").append("<div id='csrf' />");
  $("#csrf").load("csrf.php");
  $("body").append("<div id=footer class=center >GPLv2 licensed by <a href='https://github.com/zhblue/hustoj' >HUSTOJ</a> "+(new Date()).getFullYear()+" </div>");
  $("body").append("<div class=center > <img src='http://hustoj.com/wx.jpg' width='96px'><br> 欢迎关注微信公众号onlinejudge<br><img src=\"http://tk.hustoj.com/upload/image/20180621/20180621190059_62537.png\" width=\"200\" height=\"301\"  alt='支付宝扫一扫领红包'/></div>");
});
  console.log("If you want to change the appearance of the web pages, make a copy of bs3 under template directory.\nRename it to whatever you like, and change the $OJ_TEMPLATE value in db_info.inc.php\nAfter that modify files under your own directory .\n");


</script>

	
<script>
function phpfm(pid){
        //alert(pid);
        $.post("admin/phpfm.php",{'frame':3,'pid':pid,'pass':''},function(data,status){
                if(status=="success"){
                        document.location.href="admin/phpfm.php?frame=3&pid="+pid;
                }
        });
}
$(document).ready(function(){
	$("#creator").load("problem-ajax.php?pid=24776");
});
</script>	  
  </body>
</html>
<!--not cached-->

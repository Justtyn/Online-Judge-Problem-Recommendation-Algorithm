<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ACM NOIP 信息学竞赛 测试数据 下载 大全">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>TK题库</title>  
    
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/bootstrap.min.css">

<!-- 可选的Bootstrap主题文件（一般不用引入） -->
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/bootstrap-theme.min.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/white.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/katex.min.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/mathjax.css">
<link rel="stylesheet" href="http://cdn.hustoj.com/template/bs3/semantic.min.css">
	    


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">
          <!-- Static navbar -->
      <nav class="navbar navbar-default" role="navigation" >
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="./">TK题库</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
	      <!--              <li ><a href="bbs.php">Web Board</a></li>-->
              <li ><a href="faqs.php"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> F.A.Qs</a></li>
              <li class='btn-primary' ><a style='color:white' href="problemset.php"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> ProblemSet</a></li>
              <li class='btn-success'><a  style='color:white'  href="problemset.php?search=free"><span class="glyphicon glyphicon-gift" aria-hidden="true"></span> 免费专区</a></li>
              <li class='btn-danger'><a  style='color:white' href="problemset.php?hot"><span class="glyphicon glyphicon-fire" aria-hidden="true"></span> 热门下载</a></li>
              <li class='btn-warning'><a  style='color:white' href="category.php"><span class="glyphicon glyphicon-th" aria-hidden="true"></span> Source/Category</a></li>
              <li class='btn-info'><a  style='color:white' href="status.php"><span class="glyphicon glyphicon-play-circle" aria-hidden="true"></span> Status</a></li>
 <!--             <li ><a href="ranklist.php">Ranklist</a></li>
              <li ><a href="recent-contest.php">Recent</a></li>
              <li ><a href="contest.php">Contest</a></li>
	-->
		<li><a > 题目数据全能下，右上角注册充值，支持微信! </a></li>
            </ul>
	    <ul class="nav navbar-nav navbar-right">
	    <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="profile">Login</span><span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
<script src="template/tk/profile.php?1924097135" ></script>
              <!--<li><a href="../navbar-fixed-top/">Fixed top</a></li>-->
	    </ul>
	    </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>


	    
      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
	
<title>Problem 24780 --【USACO2014MARCH】懒牛{silver题2}</title><center><h2>24780: 【USACO2014MARCH】懒牛{silver题2}</h2><span class=green>Time Limit: </span>2 Sec&nbsp;&nbsp;<span class=green>Memory Limit: </span>256 MB<br><span class=green>Submit: </span>7&nbsp;&nbsp;<span class=green>Solved: </span>5<br>[<a href='submitpage.php?id=24780'>Submit</a>][<a href='problemstatus.php?id=24780'>Status</a>][<a href='bbs.php?pid=24780'>Web Board</a>][Creator:<span id='creator'></span>][<a href='pay.php?pid=24780'>下载FPS1元</a>][<a onclick='$(this).load("cart.php?add=24780");'>添加到购物车</a>][<a href='pay.php?fmt=zipdata&pid=24780'>下载测试数据1元</a>][2404kb]</center><!--StartMarkForVirtualJudge--><h2>Description</h2><div class=content><p class="MsoNormal" align="center" style="text-align:center;">
	<b><span style="font-size:18px;">2. </span></b><b><span style="font-size:18px;">懒牛</span></b><b><span style="font-size:18px;">{silver</span></b><b><span style="font-size:18px;">题</span></b><b><span style="font-size:18px;">2}</span></b> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">【问题描述】</span> 
</p>
<p class="MsoNormal" style="text-indent:21.0pt;">
	<span style="font-size:18px;">奶牛贝西非常懒惰，她希望在她的地盘内找到一点最佳位置居住，以便在有限的步数内可以吃到尽量多的青草。</span> 
</p>
<p class="MsoNormal" style="text-indent:21.0pt;">
	<span style="font-size:18px;">她的地盘是一个N行N列(1 &lt;= N &lt;= 400)的矩阵，第r行c列包含G(r,c)单位的青草(0 &lt;= G(r,c) &lt;= 1000)。从她的居住点，她最多愿意走K步(0 &lt;= K &lt;= 2*N)，每一步她可以找到上、下、左、右直接相邻的某个格子。</span> 
</p>
<p class="MsoNormal" style="text-indent:21.0pt;">
	<span style="font-size:18px;">例如，她的居住地在B处：</span> 
</p>
<div align="center">
	<table class="MsoNormalTable ke-zeroborder" border="0" cellspacing="0" cellpadding="0" width="227" style="width:170pt;">
		<tbody>
			<tr>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">50</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">5</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">25*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">6</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">17</span></b> 
					</p>
				</td>
			</tr>
			<tr>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">14</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">3*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">2*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">7*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">21</span></b> 
					</p>
				</td>
			</tr>
			<tr>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">99*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">10*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">1*(B)</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">2*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">80*</span></b> 
					</p>
				</td>
			</tr>
			<tr>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">8</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">7*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">5*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">23*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">11</span></b> 
					</p>
				</td>
			</tr>
			<tr>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">10</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">0</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">78*</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">1</span></b> 
					</p>
				</td>
				<td width="45" valign="bottom" style="border:solid windowtext 1.0pt;">
					<p class="MsoNormal" align="center" style="text-align:center;">
						<b><span style="font-size:14px;font-family:宋体;">9</span></b> 
					</p>
				</td>
			</tr>
		</tbody>
	</table>
</div>
<p class="MsoNormal">
	<span style="font-size:18px;">当K=2时，她只愿意到标有*的位置。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">请帮助她确定一个最佳的居住点，使她能吃到的最多的草。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">【文件输入】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">第一行，两个用空格隔开在整数N和K。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">接下来N行N列的矩阵，每个数字表示草的数量。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">【文件输出】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">一个整数，表示她能吃到的最多的草量。</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">【输入样例1】 </span><span></span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">5 2</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">50 5 25 6
17</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">14 3 2 7
21</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">99 10 1 2
80</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">8 7 5 23
11</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">10 0 78 1
9</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">【输出样例1】</span> 
</p>
<p class="MsoNormal">
	<span style="font-size:18px;">342</span> 
</p></div><h2>Input</h2><div class=content></div><h2>Output</h2><div class=content></div><h2>HINT</h2>
<div class=content><p><p style="font-family:Simsun;font-size:medium;"><br />
	<b>Analysis: The Lazy Cow [Silver] by Fatih Gelgi</b> <br />
</p><br />
<hr /><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	The straightforward idea is to try brute-force: for each cell (r,c), calculate the amount of grass in K steps. This approach requires O(N^2 K^2) which is slow considering the given bounds in the problem. A simple observation is that we don't need to recalculate the sum of the square region each time. Instead we can slide it by removing the values of former cells and adding values of new cells. The number of cells to remove and add is O(K) as opposed to O(K^2).<br />
</p><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	Note that the reachable cells from a cell compose a square of size K which is tilted 45 degrees. How to slide that tilted square? While sliding a square is simple, this one seems rather complicated. An idea is to rotate the grid instead of rotating the sliding window as shown in the example below:<br />
</p><br />
<pre> 0  0  0  0 50  0  0  0  0<br />
 0  0  0 14  0  5  0  0  0 <br />
 0  0 99* 0* 3* 0*25* 0  0<br />
 0  8  0*10* 0* 2* 0* 6  0<br />
10  0  7* 0* 1* 0* 7* 0 17 <br />
 0  0  0* 5* 0* 2* 0*21  0<br />
 0  0 78* 0*23* 0*80* 0  0<br />
 0  0  0  1  0 11  0  0  0<br />
 0  0  0  0  9  0  0  0  0<br />
</pre><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	Now we can slide it easily by subtracting the first column in the region from the sum and adding the next column after the region to the sum. Note that the matrix includes non-lattice points too (i.e. extra zeros in the matrix). Bessie can be positioned in lattice points only; that needs an extra check.<br />
</p><br />
<p style="font-family:Simsun;font-size:medium;"><br />
	In this approach, the complexity is reduced to O(KN^2). The required memory becomes 4 times more but it is not a trouble since N is small. Although the solution can have further optimization, this one is rather easy to implement and more than sufficient for the problem. A sample code is provided below:<br />
</p><br />
<pre>#include &lt;fstream&gt;<br />
<br />
#define MAX 801<br />
<br />
using namespace std;<br />
<br />
int n,k,mat[MAX][MAX],best;<br />
<br />
int main()<br />
{<br />
	ifstream fin("lazy.in");<br />
	fin &gt;&gt; n &gt;&gt; k;<br />
	// rotate the matrix 45 degrees<br />
	for (int i=0; i&lt;n; i++)<br />
		for (int j=0; j&lt;n; j++)<br />
			fin &gt;&gt; mat[i+j][n-i+j-1];<br />
	fin.close();<br />
<br />
	// 45 degree rotation expands the size of the matrix<br />
	// it also includes the cells with half distance<br />
	int t=(n+1)%2;	// t is used to avoid non-lattice points<br />
	n=n*2-1;<br />
	for (int i=0; i&lt;n; i++,t=1-t)<br />
	{<br />
		// calculate the sum of 2k x 2k region<br />
		// Bessie can only be positioned in lattice points<br />
		int sum=0;<br />
		for (int a=max(i-k,0); a&lt;n &amp;&amp; a&lt;=i+k; a++)<br />
			for (int b=max(t-k,0); b&lt;n &amp;&amp; b&lt;=t+k; b++)<br />
				sum+=mat[a][b];<br />
		if (best&lt;sum) best=sum;<br />
<br />
		// slide the region<br />
		for (int j=t+1; j+k&lt;n; j++)<br />
		{<br />
			for (int a=max(i-k,0); a&lt;n &amp;&amp; a&lt;=i+k; a++)<br />
			{<br />
				if (j-k-1&gt;=0) sum-=mat[a][j-k-1];<br />
				sum+=mat[a][j+k];<br />
			}<br />
			// update the sum only in lattice points<br />
			if (j%2==t &amp;&amp; best&lt;sum) best=sum;<br />
		}<br />
	}<br />
<br />
	ofstream fout("lazy.out");<br />
	fout &lt;&lt; best &lt;&lt; endl;<br />
	fout.close();<br />
}</pre></p></div><h2>Source</h2><div class=content><p><a href='problemset.php?search=USACO-USACO%E6%9C%88%E8%B5%9B'>USACO-USACO月赛</a>&nbsp;</p></div><center><!--EndMarkForVirtualJudge-->[<a href='submitpage.php?id=24780'>Submit</a>][<a href='problemstatus.php?id=24780'>Status</a>]</center>      </div>

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="http://cdn.hustoj.com/template/bs3/jquery.min.js"></script>

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="http://cdn.hustoj.com/template/bs3/bootstrap.min.js"></script>

<!--<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->
<script>
$(document).ready(function(){
  var msg="<div style='margin-top:10px'  direction='up'   id=broadcast scrollamount=1 scrolldelay=50 onMouseOver='this.stop()'"+
      " onMouseOut='this.start()' class=toprow>"+"<p style=\"text-align:center;\">\r\n\t<span style=\"color:#24292E;font-family:-apple-system&#44; bl<x>inkMacSystemFont&#44; &quot;font-size:16px;background-color:#FFFFFF;\">\u5e86\u795dhustoj\u5728\u9996\u5c4a\u6df1\u5ea6\u8f6f\u4ef6\u5f00\u53d1\u5927\u8d5b\u4e2d\u83b7\u5f97\u4e09\u7b49\u5956\uff0c\u5145\u503c100\u900120\u3002<\/span>\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u672c\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u683c\u5f0f\u6570\u636e\u4e0b\u8f7d\uff0cfps\/xm<x>l\u683c\u5f0f\u542b\u9898\u9762\u56fe\u7247\u6570\u636e\u6807\u7a0b\u652f\u6301hustoj\u7cfb\u7edf\u76f4\u63a5\u5bfc\u5165\uff0czip\u683c\u5f0f\u4ec5\u542b\u6570\u636e\u4e0d\u542b\u9898\u9762\u3002\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u91cd\u590d\u4e0b\u8f7d\u4e0d\u91cd\u590d\u8ba1\u8d39\u3002\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u5982\u9047\u5145\u503c\u4e0d\u80fd\u5230\u8d26&#44;\u8bf7\u8054\u7cfbQQ:10982766\u63d0\u4f9b\u7528\u6237\u540d\u548c\u652f\u4ed8\u5355\u53f7\u8fdb\u884c\u6838\u5bf9\r\n<br \/>\r\n<p style=\"text-align:center;\">\r\n\t\u7ecf\u8d39\u4e0d\u8db3\u7684\u8001\u5e08\u540c\u5b66\u8bf7\u5148\u770b <br \/>\r\n<span class=\"btn-success\"> <a href=\"problemset.php?search=free\"><span> \u514d\u8d39\u4e13\u533a<\/span><\/a> <\/span>\r\n<br \/>"+"</div>";
  $(".jumbotron").prepend(msg);
  $("form").append("<div id='csrf' />");
  $("#csrf").load("csrf.php");
  $("body").append("<div id=footer class=center >GPLv2 licensed by <a href='https://github.com/zhblue/hustoj' >HUSTOJ</a> "+(new Date()).getFullYear()+" </div>");
  $("body").append("<div class=center > <img src='http://hustoj.com/wx.jpg' width='96px'><br> 欢迎关注微信公众号onlinejudge<br><img src=\"http://tk.hustoj.com/upload/image/20180621/20180621190059_62537.png\" width=\"200\" height=\"301\"  alt='支付宝扫一扫领红包'/></div>");
});
  console.log("If you want to change the appearance of the web pages, make a copy of bs3 under template directory.\nRename it to whatever you like, and change the $OJ_TEMPLATE value in db_info.inc.php\nAfter that modify files under your own directory .\n");


</script>

	
<script>
function phpfm(pid){
        //alert(pid);
        $.post("admin/phpfm.php",{'frame':3,'pid':pid,'pass':''},function(data,status){
                if(status=="success"){
                        document.location.href="admin/phpfm.php?frame=3&pid="+pid;
                }
        });
}
$(document).ready(function(){
	$("#creator").load("problem-ajax.php?pid=24780");
});
</script>	  
  </body>
</html>
<!--not cached-->
